(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),o=n(14),a=n.n(o),i=(n(19),n(3)),u=n(0),s=function(e){var t=e.searchby,n=e.handleChange;return Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{type:"text",value:t,onChange:n})]})},d=n(4),l=n.n(d),j="/api/persons",b=function(){return l.a.get(j).then((function(e){return e.data}))},h=function(e){return l.a.post(j,e).then((function(e){return e.data}))},f=function(e,t){return l.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},m=function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var t=e.toggleDelete;return Object(u.jsx)("button",{onClick:t,children:"delete"})},g=function(e){var t=e.message;return t?Object(u.jsx)("div",{style:t.includes("added")?{color:"green",background:"lightgrey",fontSize:20,borderRadius:5,borderStyle:"solid",padding:10,marginBottom:10}:{color:"red",background:"lightgrey",fontSize:20,borderRadius:5,borderStyle:"solid",padding:10,marginBottom:10},children:t}):null},x=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),a=Object(i.a)(o,2),d=a[0],l=a[1],j=Object(r.useState)(""),x=Object(i.a)(j,2),p=x[0],v=x[1],y=Object(r.useState)(""),S=Object(i.a)(y,2),w=S[0],k=S[1],C=Object(r.useState)(""),B=Object(i.a)(C,2),D=B[0],T=B[1];Object(r.useEffect)((function(){b().then((function(e){return c(e)}))}),[]),console.log("render",n.length,"persons");return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"PhoneBook"}),Object(u.jsx)(g,{message:D}),Object(u.jsx)(s,{searchby:w,handleChange:function(e){k(e.target.value)}}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name===d.trim()}));t.length?(u.Fragment,!0===window.confirm("This name already exists,replace the old number?")&&f(t[0].id,{name:d,num:p}).then((function(e){c(n.map((function(n){return n.id!==t[0].id?n:e})))})).catch((function(){T("name has already been deleted from the server"),setTimeout((function(){T("")}),3e3)}))):h({name:d,num:p}).then((function(e){c(n.concat(e)),T("added new name"),setTimeout((function(){T("")}),3e3)}))},children:[Object(u.jsx)("h2",{children:"add a name"}),Object(u.jsxs)("div",{children:["name :",Object(u.jsx)("input",{type:"text",value:d,onChange:function(e){return l(e.target.value)},required:!0})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{children:["number :",Object(u.jsx)("input",{type:"text",value:p,onChange:function(e){return v(e.target.value)},required:!0})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{children:"add"}),Object(u.jsx)("br",{})]}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:w?n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})).map((function(e,t){return Object(u.jsxs)("li",{children:[" ",e.name,e.num]},"person".concat(t))})):n.map((function(e,t){return Object(u.jsxs)("li",{className:"person",children:[e.name," ",e.num,Object(u.jsx)(O,{toggleDelete:function(){return t=e.id,void m(t).then((function(){c(n.filter((function(e){return e.id!==t})))}));var t}})]},"person-".concat(t))}))})]})};a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2dc8827d.chunk.js.map